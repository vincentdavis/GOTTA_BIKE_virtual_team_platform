{# Member Profile Table for Membership Review #}
<div class="overflow-x-auto">
  <table class="table table-zebra table-sm">
    <thead>
    <tr>
      {% with base_url="?q="|add:search_query|add:"&zp_category="|add:zp_category_filter|add:"&gender="|add:gender_filter|add:"&country="|add:country_filter|add:"&status="|add:status_filter|add:"&view=member" %}
      <th>
        <a href="{{ base_url }}&sort=name&dir={% if sort_by == 'name' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}" class="flex items-center gap-1 hover:text-primary">
          Full Name
          {% if sort_by == "name" %}
            <span class="text-primary">{% if sort_dir == "asc" %}▲{% else %}▼{% endif %}</span>
          {% endif %}
        </a>
      </th>
      <th>
        <a href="{{ base_url }}&sort=discord&dir={% if sort_by == 'discord' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}" class="flex items-center gap-1 hover:text-primary">
          Discord
          {% if sort_by == "discord" %}
            <span class="text-primary">{% if sort_dir == "asc" %}▲{% else %}▼{% endif %}</span>
          {% endif %}
        </a>
      </th>
      <th>
        <a href="{{ base_url }}&sort=country&dir={% if sort_by == 'country' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}" class="flex items-center gap-1 hover:text-primary">
          Country
          {% if sort_by == "country" %}
            <span class="text-primary">{% if sort_dir == "asc" %}▲{% else %}▼{% endif %}</span>
          {% endif %}
        </a>
      </th>
      <th>
        <a href="{{ base_url }}&sort=city&dir={% if sort_by == 'city' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}" class="flex items-center gap-1 hover:text-primary">
          City
          {% if sort_by == "city" %}
            <span class="text-primary">{% if sort_dir == "asc" %}▲{% else %}▼{% endif %}</span>
          {% endif %}
        </a>
      </th>
      <th>
        <a href="{{ base_url }}&sort=timezone&dir={% if sort_by == 'timezone' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}" class="flex items-center gap-1 hover:text-primary">
          Timezone
          {% if sort_by == "timezone" %}
            <span class="text-primary">{% if sort_dir == "asc" %}▲{% else %}▼{% endif %}</span>
          {% endif %}
        </a>
      </th>
      <th>
        <a href="{{ base_url }}&sort=birth_year&dir={% if sort_by == 'birth_year' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}" class="flex items-center gap-1 hover:text-primary">
          Birth Year
          {% if sort_by == "birth_year" %}
            <span class="text-primary">{% if sort_dir == "asc" %}▲{% else %}▼{% endif %}</span>
          {% endif %}
        </a>
      </th>
      <th>
        <a href="{{ base_url }}&sort=trainer&dir={% if sort_by == 'trainer' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}" class="flex items-center gap-1 hover:text-primary">
          Trainer
          {% if sort_by == "trainer" %}
            <span class="text-primary">{% if sort_dir == "asc" %}▲{% else %}▼{% endif %}</span>
          {% endif %}
        </a>
      </th>
      <th>Power Meter</th>
      <th>Dual Rec</th>
      <th>HR Monitor</th>
      <th>Emergency Contact</th>
      {% endwith %}
    </tr>
    </thead>
    <tbody>
    {% for rider in riders %}
      <tr>
        <td class="font-medium">
          {{ rider.full_name|default:"-" }}
        </td>
        <td>
          {% if rider.discord_profile_url %}
            <a href="{{ rider.discord_profile_url }}" target="_blank" rel="noopener" class="link link-hover inline-flex items-center gap-1">
              {{ rider.discord_nickname }}
              <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
              </svg>
            </a>
          {% elif rider.discord_nickname %}
            {{ rider.discord_nickname }}
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
        <td>
          {% if rider.country_name %}
            {{ rider.country_name }}
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
        <td>
          {% if rider.city %}
            {{ rider.city }}
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
        <td>
          {% if rider.timezone %}
            <span class="text-sm">{{ rider.timezone }}</span>
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
        <td>
          {% if rider.birth_year %}
            {{ rider.birth_year }}
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
        <td>
          {% if rider.trainer %}
            {{ rider.trainer }}
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
        <td>
          {% if rider.powermeter %}
            {{ rider.powermeter }}
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
        <td>
          {% if rider.dual_recording is not None %}
            {% if rider.dual_recording %}
              <span class="badge badge-success badge-sm">Yes</span>
            {% else %}
              <span class="badge badge-ghost badge-sm">No</span>
            {% endif %}
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
        <td>
          {% if rider.heartrate_monitor %}
            {{ rider.heartrate_monitor }}
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
        <td>
          {% if rider.emergency_contact_name %}
            <div class="text-sm">
              <div class="font-medium">{{ rider.emergency_contact_name }}</div>
              {% if rider.emergency_contact_phone %}
                <div class="text-base-content/70">{{ rider.emergency_contact_phone }}</div>
              {% endif %}
            </div>
          {% else %}
            <span class="text-base-content/30">-</span>
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="11" class="text-center text-base-content/50">
          No members found.
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
